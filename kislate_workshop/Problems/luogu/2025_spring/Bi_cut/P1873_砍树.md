# P1873 [COCI 2011/2012 #5] EKO / ç æ ‘

## é¢˜ç›®æè¿°

ä¼æœ¨å·¥äºº Mirko éœ€è¦ç  $M$ ç±³é•¿çš„æœ¨æã€‚å¯¹ Mirko æ¥è¯´è¿™æ˜¯å¾ˆç®€å•çš„å·¥ä½œï¼Œå› ä¸ºä»–æœ‰ä¸€ä¸ªæ¼‚äº®çš„æ–°ä¼æœ¨æœºï¼Œå¯ä»¥å¦‚é‡Žç«ä¸€èˆ¬ç ä¼æ£®æž—ã€‚ä¸è¿‡ï¼ŒMirko åªè¢«å…è®¸ç ä¼ä¸€æŽ’æ ‘ã€‚

Mirko çš„ä¼æœ¨æœºå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼šMirko è®¾ç½®ä¸€ä¸ªé«˜åº¦å‚æ•° $H$ï¼ˆç±³ï¼‰ï¼Œä¼æœ¨æœºå‡èµ·ä¸€ä¸ªå·¨å¤§çš„é”¯ç‰‡åˆ°é«˜åº¦ $H$ï¼Œå¹¶é”¯æŽ‰æ‰€æœ‰æ ‘æ¯” $H$ é«˜çš„éƒ¨åˆ†ï¼ˆå½“ç„¶ï¼Œæ ‘æœ¨ä¸é«˜äºŽ $H$ ç±³çš„éƒ¨åˆ†ä¿æŒä¸å˜ï¼‰ã€‚Mirko å°±å¾—åˆ°æ ‘æœ¨è¢«é”¯ä¸‹çš„éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœä¸€æŽ’æ ‘çš„é«˜åº¦åˆ†åˆ«ä¸º $20,15,10$ å’Œ $17$ï¼ŒMirko æŠŠé”¯ç‰‡å‡åˆ° $15$ ç±³çš„é«˜åº¦ï¼Œåˆ‡å‰²åŽæ ‘æœ¨å‰©ä¸‹çš„é«˜åº¦å°†æ˜¯ $15,15,10$ å’Œ $15$ï¼Œè€Œ Mirko å°†ä»Žç¬¬ $1$ æ£µæ ‘å¾—åˆ° $5$ ç±³ï¼Œä»Žç¬¬ $4$ æ£µæ ‘å¾—åˆ° $2$ ç±³ï¼Œå…±å¾—åˆ° $7$ ç±³æœ¨æã€‚

Mirko éžå¸¸å…³æ³¨ç”Ÿæ€ä¿æŠ¤ï¼Œæ‰€ä»¥ä»–ä¸ä¼šç æŽ‰è¿‡å¤šçš„æœ¨æã€‚è¿™ä¹Ÿæ˜¯ä»–å°½å¯èƒ½é«˜åœ°è®¾å®šä¼æœ¨æœºé”¯ç‰‡çš„åŽŸå› ã€‚è¯·å¸®åŠ© Mirko æ‰¾åˆ°ä¼æœ¨æœºé”¯ç‰‡çš„æœ€å¤§çš„æ•´æ•°é«˜åº¦ $H$ï¼Œä½¿å¾—ä»–èƒ½å¾—åˆ°çš„æœ¨æè‡³å°‘ä¸º $M$ ç±³ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æžœå†å‡é«˜ $1$ ç±³ï¼Œä»–å°†å¾—ä¸åˆ° $M$ ç±³æœ¨æã€‚

## è¾“å…¥æ ¼å¼

ç¬¬ $1$ è¡Œ $2$ ä¸ªæ•´æ•° $N$ å’Œ $M$ï¼Œ$N$ è¡¨ç¤ºæ ‘æœ¨çš„æ•°é‡ï¼Œ$M$ è¡¨ç¤ºéœ€è¦çš„æœ¨ææ€»é•¿åº¦ã€‚

ç¬¬ $2$ è¡Œ $N$ ä¸ªæ•´æ•°è¡¨ç¤ºæ¯æ£µæ ‘çš„é«˜åº¦ã€‚

## è¾“å‡ºæ ¼å¼

$1$ ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºé”¯ç‰‡çš„æœ€é«˜é«˜åº¦ã€‚

## è¾“å…¥è¾“å‡ºæ ·ä¾‹ #1

### è¾“å…¥ #1

```
4 7
20 15 10 17
```

### è¾“å‡º #1

```
15
```

## è¾“å…¥è¾“å‡ºæ ·ä¾‹ #2

### è¾“å…¥ #2

```
5 20
4 42 40 26 46
```

### è¾“å‡º #2

```
36
```

## è¯´æ˜Ž/æç¤º

å¯¹äºŽ $100\%$ çš„æµ‹è¯•æ•°æ®ï¼Œ$1\le N\le10^6$ï¼Œ$1\le M\le2\times10^9$ï¼Œæ ‘çš„é«˜åº¦ $\le 4\times 10^5$ï¼Œæ‰€æœ‰æ ‘çš„é«˜åº¦æ€»å’Œ $>M$ã€‚

## ç‰›é©¬é¢˜:
```cpp

#include <bits/stdc++.h>
using namespace std;
unsigned long long N, M;
vector<unsigned long long> heights, prefix_sum;
bool check(unsigned long long mid);
int main(void)
{
    cin >> N >> M;
    heights.resize(N + 1);
    prefix_sum.resize(N + 1);
    for(unsigned long long i = 1; i <= N; i++) cin >> heights[i];
    sort(heights.begin(), heights.end());
    for(unsigned long long i = 1; i <= N; i++) prefix_sum[i] = prefix_sum[i-1] + heights[i];
    unsigned long long left = 1, right = heights[N];
    while(left <= right){
        unsigned long long mid = (left + right) / 2;
        if(check(mid)) left = mid + 1;
        else right = mid - 1;
    }
    cout << right << endl;
    return 0;
}
bool check(unsigned long long mid)
{
    unsigned long long idx = 1;
    while(idx <= N && heights[idx] <= mid) idx++;
    unsigned long long x = prefix_sum[N] - prefix_sum[idx - 1] - mid * (N - idx + 1);
    if(x < M) return false;
    return true;
}
```

### å¤§ä½¬çš„è§£æ³•:
ðŸ”—https://www.luogu.com.cn/article/3y6846x4
```cpp
#include<cstdio>
#include<cstring>
#include<algorithm>
using namespace std;
int tree[1000001];
int n,m;
int main()
{
    int i,num,ans;
    long long sum;
    scanf("%d%d",&n,&m);
    for(i=1;i<=n;i++)
        scanf("%d",&tree[i]);
    sort(tree+1,tree+n+1);
    sum=0;
    num=n;
    while(sum<m)
    {
        sum+=(tree[num]-tree[num-1])*(n-num+1);
        num--;
    }
    num++;
    ans=tree[num-1]+(sum-m)/(n-num+1);
    printf("%d\n",ans);
    return 0;
}
```