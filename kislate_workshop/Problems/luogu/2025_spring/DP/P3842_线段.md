# P3842 [TJOI2007] çº¿æ®µ

## é¢˜ç›®æè¿°

åœ¨ä¸€ä¸ª $n \times n$ çš„å¹³é¢ä¸Šï¼Œåœ¨æ¯ä¸€è¡Œä¸­æœ‰ä¸€æ¡çº¿æ®µï¼Œç¬¬ $i$ è¡Œçš„çº¿æ®µçš„å·¦ç«¯ç‚¹æ˜¯$(i, L_{i})$ï¼Œå³ç«¯ç‚¹æ˜¯$(i, R_{i})$ã€‚

ä½ ä» $(1,1)$ ç‚¹å‡ºå‘ï¼Œè¦æ±‚æ²¿é€”èµ°è¿‡æ‰€æœ‰çš„çº¿æ®µï¼Œæœ€ç»ˆåˆ°è¾¾ $(n,n)$ ç‚¹ï¼Œä¸”æ‰€èµ°çš„è·¯ç¨‹é•¿åº¦è¦å°½é‡çŸ­ã€‚

æ›´å…·ä½“ä¸€äº›è¯´ï¼Œä½ åœ¨ä»»ä½•æ—¶å€™åªèƒ½é€‰æ‹©å‘ä¸‹èµ°ä¸€æ­¥ï¼ˆè¡Œæ•°å¢åŠ  $1$ï¼‰ã€å‘å·¦èµ°ä¸€æ­¥ï¼ˆåˆ—æ•°å‡å°‘ $1$ï¼‰æˆ–æ˜¯å‘å³èµ°ä¸€æ­¥ï¼ˆåˆ—æ•°å¢åŠ  $1$ï¼‰ã€‚å½“ç„¶ï¼Œç”±äºä½ ä¸èƒ½å‘ä¸Šè¡Œèµ°ï¼Œå› æ­¤åœ¨ä»ä»»ä½•ä¸€è¡Œå‘ä¸‹èµ°åˆ°å¦ä¸€è¡Œçš„æ—¶å€™ï¼Œä½ å¿…é¡»ä¿è¯å·²ç»èµ°å®Œæœ¬è¡Œçš„é‚£æ¡çº¿æ®µã€‚

## è¾“å…¥æ ¼å¼

ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ•´æ•° $n$ã€‚

ä»¥ä¸‹ $n$ è¡Œï¼Œåœ¨ç¬¬ $i$ è¡Œï¼ˆæ€»ç¬¬ $(i+1)$ è¡Œï¼‰çš„ä¸¤ä¸ªæ•´æ•°è¡¨ç¤º $L_i$ å’Œ $R_i$ã€‚

## è¾“å‡ºæ ¼å¼

ä»…åŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä½ é€‰æ‹©çš„æœ€çŸ­è·¯ç¨‹çš„é•¿åº¦ã€‚
$$ just\ do\ it$$
## è¾“å…¥è¾“å‡ºæ ·ä¾‹ #1

### è¾“å…¥ #1

```
6
2 6
3 4
1 3
1 2
3 6
4 5
```

### è¾“å‡º #1

```
24
```

## è¯´æ˜/æç¤º

æˆ‘ä»¬é€‰æ‹©çš„è·¯çº¿æ˜¯

```
 (1, 1) (1, 6)
 (2, 6) (2, 3)
 (3, 3) (3, 1)
 (4, 1) (4, 2)
 (5, 2) (5, 6)
 (6, 6) (6, 4) (6, 6)
```
ä¸éš¾è®¡ç®—å¾—åˆ°ï¼Œè·¯ç¨‹çš„æ€»é•¿åº¦æ˜¯ $24$ã€‚ 

å¯¹äº $100\%$ çš„æ•°æ®ä¸­ï¼Œ$n \le 2 \times 10^4$ï¼Œ$1 \le L_i \le R_i \le n$ã€‚
### ä¸‹é¢æ˜¯å°è¯•ä»£ç (AC):
```cpp
#include <bits/stdc++.h>
using namespace std;
int main(void)
{
    int N;
    cin >> N;
    vector<vector<int>> dp(N+1, vector<int>(2, 0)), index_l_r(N+1, vector<int>(2, 0));
    vector<int> length(N+1, 0);
    for(int i = 1; i <= N; i++)
    {
        cin >> index_l_r[i][0] >> index_l_r[i][1];
        length[i] = index_l_r[i][1] - index_l_r[i][0];
    }
    dp[1][0] = abs(index_l_r[1][0] - 1), dp[1][1] = 10000000;
    for(int i = 2; i <= N; i++)
    {
        int l_l = abs(index_l_r[i-1][0] - index_l_r[i][0]);
        int l_r = abs(index_l_r[i-1][0] - index_l_r[i][1]);
        int r_l = abs(index_l_r[i-1][1] - index_l_r[i][0]);
        int r_r = abs(index_l_r[i-1][1] - index_l_r[i][1]);
        dp[i][0] = min(dp[i-1][0] + length[i-1] + r_l, dp[i-1][1] + length[i-1] + l_l);
        dp[i][1] = min(dp[i-1][0] + length[i-1] + r_r, dp[i-1][1] + length[i-1] + l_r);
    }
    int ans = min(dp[N][0] + length[N] + (N - index_l_r[N][1]), dp[N][1] + length[N] + (N - index_l_r[N][0])) + N - 1;
    cout << ans << endl;
    return 0;
}
```
### ä¸€ä»½å¤§ä½¬å†™çš„æœ€çŸ­è·¯:
ğŸ”—https://www.luogu.com.cn/article/bg5jzebu
```cpp
#include<iostream>
#include<algorithm>
#include<cstdio>
#include<cstring>
#include<vector>
#include<queue>
#define Pair pair<int, int>
using namespace std;
int ne,n,m=1;
int head[40010],vis[40010],l[20010],r[20010];
long long dis[40010];
struct edge
{
	int to,next,v;
}e[50000005];
priority_queue<Pair, vector<Pair>, greater<Pair> > Heap;
void insert(int u,int v,int d)//å»ºå›¾
{
	ne++;
	e[ne].to=v;
	e[ne].next=head[u];
	e[ne].v=d;
	head[u]=ne;
}

int main()
{
	cin>>n;
	for(int i=1;i<=n;i++)
    {
        cin>>l[i]>>r[i];
        m++;//å·¦è¾¹çš„ç‚¹
        if(i==1)//èµ·ç‚¹å¼€å§‹å»ºå›¾
        {
            insert(1,m,r[i]-1+r[i]-l[i]);
        }
        else//å‰ä¸€è¡Œçš„ä¸¤ä¸ªç‚¹åˆ†åˆ«å»ºå›¾
        {
            insert(m-2,m,abs(r[i]-l[i-1])+r[i]-l[i]);
            insert(m-1,m,abs(r[i]-r[i-1])+r[i]-l[i]);
        }
        m++;//å³è¾¹çš„ç‚¹
        if(i==1)//åŒä¸Š
        {
            insert(1,m,r[i]-1);
        }
        else//åŒä¸Š
        {
            insert(m-3,m,abs(l[i]-l[i-1])+r[i]-l[i]);
            insert(m-2,m,abs(l[i]-r[i-1])+r[i]-l[i]);
        }
    }
    m++;
    insert(m-2,m,n-l[n]);
    insert(m-1,m,n-r[n]);//æœ€ç»ˆå‘ç»ˆç‚¹å»ºå›¾
	for(int i=1;i<=m;i++)dis[i]=999999999;
	Heap.push(Pair(0,1));
	dis[1]=0;
	while(!Heap.empty())
	{
		int u=Heap.top().second;
		Heap.pop();
		if(vis[u])continue;
		vis[u]=1;
		for(int i=head[u];i;i=e[i].next)
		{
			int v=e[i].to;
			if(dis[u]+e[i].v<dis[v])
			{
				dis[v]=dis[u]+e[i].v;
				Heap.push(Pair(dis[v],v));
			}
		}
	}
    cout<<dis[m]+n-1;//è®°ä½åŠ ä¸Šæ¯æ¬¡åˆ°ä¸‹ä¸€è¡Œç§»åŠ¨1ï¼Œå…±n-1
	return 0;
}
```